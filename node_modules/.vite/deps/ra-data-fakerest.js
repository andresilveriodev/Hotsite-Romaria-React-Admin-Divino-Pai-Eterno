import "./chunk-4B2QHNJT.js";

// node_modules/fakerest/dist/fakerest.min.js
var Gt = Object.defineProperty;
var Kt = (t, e, r) => e in t ? Gt(t, e, { enumerable: true, configurable: true, writable: true, value: r }) : t[e] = r;
var p = (t, e, r) => (Kt(t, typeof e != "symbol" ? e + "" : e, r), r);
var B = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function lt(t) {
  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t;
}
var Ht = Array.isArray;
var O = Ht;
var qt = typeof B == "object" && B && B.Object === Object && B;
var ut = qt;
var zt = ut;
var Vt = typeof self == "object" && self && self.Object === Object && self;
var Jt = zt || Vt || Function("return this")();
var A = Jt;
var Qt = A;
var Wt = Qt.Symbol;
var R = Wt;
var Ae = R;
var ft = Object.prototype;
var Xt = ft.hasOwnProperty;
var Yt = ft.toString;
var M = Ae ? Ae.toStringTag : void 0;
function Zt(t) {
  var e = Xt.call(t, M), r = t[M];
  try {
    t[M] = void 0;
    var a = true;
  } catch {
  }
  var n = Yt.call(t);
  return a && (e ? t[M] = r : delete t[M]), n;
}
var kt = Zt;
var er = Object.prototype;
var tr = er.toString;
function rr(t) {
  return tr.call(t);
}
var ar = rr;
var we = R;
var nr = kt;
var sr = ar;
var ir = "[object Null]";
var or = "[object Undefined]";
var Te = we ? we.toStringTag : void 0;
function cr(t) {
  return t == null ? t === void 0 ? or : ir : Te && Te in Object(t) ? nr(t) : sr(t);
}
var L = cr;
function lr(t) {
  return t != null && typeof t == "object";
}
var C = lr;
var ur = L;
var fr = C;
var dr = "[object Symbol]";
function hr(t) {
  return typeof t == "symbol" || fr(t) && ur(t) == dr;
}
var oe = hr;
var gr = O;
var pr = oe;
var yr = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/;
var br = /^\w*$/;
function vr(t, e) {
  if (gr(t))
    return false;
  var r = typeof t;
  return r == "number" || r == "symbol" || r == "boolean" || t == null || pr(t) ? true : br.test(t) || !yr.test(t) || e != null && t in Object(e);
}
var $r = vr;
function _r(t) {
  var e = typeof t;
  return t != null && (e == "object" || e == "function");
}
var j = _r;
var mr = L;
var Ar = j;
var wr = "[object AsyncFunction]";
var Tr = "[object Function]";
var Or = "[object GeneratorFunction]";
var Cr = "[object Proxy]";
function Sr(t) {
  if (!Ar(t))
    return false;
  var e = mr(t);
  return e == Tr || e == Or || e == wr || e == Cr;
}
var dt = Sr;
var jr = A;
var Er = jr["__core-js_shared__"];
var Ir = Er;
var k = Ir;
var Oe = function() {
  var t = /[^.]+$/.exec(k && k.keys && k.keys.IE_PROTO || "");
  return t ? "Symbol(src)_1." + t : "";
}();
function Pr(t) {
  return !!Oe && Oe in t;
}
var xr = Pr;
var Nr = Function.prototype;
var Mr = Nr.toString;
function Rr(t) {
  if (t != null) {
    try {
      return Mr.call(t);
    } catch {
    }
    try {
      return t + "";
    } catch {
    }
  }
  return "";
}
var ht = Rr;
var Lr = dt;
var Dr = xr;
var Fr = j;
var Br = ht;
var Ur = /[\\^$.*+?()[\]{}|]/g;
var Gr = /^\[object .+?Constructor\]$/;
var Kr = Function.prototype;
var Hr = Object.prototype;
var qr = Kr.toString;
var zr = Hr.hasOwnProperty;
var Vr = RegExp(
  "^" + qr.call(zr).replace(Ur, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function Jr(t) {
  if (!Fr(t) || Dr(t))
    return false;
  var e = Lr(t) ? Vr : Gr;
  return e.test(Br(t));
}
var Qr = Jr;
function Wr(t, e) {
  return t == null ? void 0 : t[e];
}
var Xr = Wr;
var Yr = Qr;
var Zr = Xr;
function kr(t, e) {
  var r = Zr(t, e);
  return Yr(r) ? r : void 0;
}
var S = kr;
var ea = S;
var ta = ea(Object, "create");
var V = ta;
var Ce = V;
function ra() {
  this.__data__ = Ce ? Ce(null) : {}, this.size = 0;
}
var aa = ra;
function na(t) {
  var e = this.has(t) && delete this.__data__[t];
  return this.size -= e ? 1 : 0, e;
}
var sa = na;
var ia = V;
var oa = "__lodash_hash_undefined__";
var ca = Object.prototype;
var la = ca.hasOwnProperty;
function ua(t) {
  var e = this.__data__;
  if (ia) {
    var r = e[t];
    return r === oa ? void 0 : r;
  }
  return la.call(e, t) ? e[t] : void 0;
}
var fa = ua;
var da = V;
var ha = Object.prototype;
var ga = ha.hasOwnProperty;
function pa(t) {
  var e = this.__data__;
  return da ? e[t] !== void 0 : ga.call(e, t);
}
var ya = pa;
var ba = V;
var va = "__lodash_hash_undefined__";
function $a(t, e) {
  var r = this.__data__;
  return this.size += this.has(t) ? 0 : 1, r[t] = ba && e === void 0 ? va : e, this;
}
var _a = $a;
var ma = aa;
var Aa = sa;
var wa = fa;
var Ta = ya;
var Oa = _a;
function E(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.clear(); ++e < r; ) {
    var a = t[e];
    this.set(a[0], a[1]);
  }
}
E.prototype.clear = ma;
E.prototype.delete = Aa;
E.prototype.get = wa;
E.prototype.has = Ta;
E.prototype.set = Oa;
var Ca = E;
function Sa() {
  this.__data__ = [], this.size = 0;
}
var ja = Sa;
function Ea(t, e) {
  return t === e || t !== t && e !== e;
}
var ce = Ea;
var Ia = ce;
function Pa(t, e) {
  for (var r = t.length; r--; )
    if (Ia(t[r][0], e))
      return r;
  return -1;
}
var J = Pa;
var xa = J;
var Na = Array.prototype;
var Ma = Na.splice;
function Ra(t) {
  var e = this.__data__, r = xa(e, t);
  if (r < 0)
    return false;
  var a = e.length - 1;
  return r == a ? e.pop() : Ma.call(e, r, 1), --this.size, true;
}
var La = Ra;
var Da = J;
function Fa(t) {
  var e = this.__data__, r = Da(e, t);
  return r < 0 ? void 0 : e[r][1];
}
var Ba = Fa;
var Ua = J;
function Ga(t) {
  return Ua(this.__data__, t) > -1;
}
var Ka = Ga;
var Ha = J;
function qa(t, e) {
  var r = this.__data__, a = Ha(r, t);
  return a < 0 ? (++this.size, r.push([t, e])) : r[a][1] = e, this;
}
var za = qa;
var Va = ja;
var Ja = La;
var Qa = Ba;
var Wa = Ka;
var Xa = za;
function I(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.clear(); ++e < r; ) {
    var a = t[e];
    this.set(a[0], a[1]);
  }
}
I.prototype.clear = Va;
I.prototype.delete = Ja;
I.prototype.get = Qa;
I.prototype.has = Wa;
I.prototype.set = Xa;
var Q = I;
var Ya = S;
var Za = A;
var ka = Ya(Za, "Map");
var le = ka;
var Se = Ca;
var en = Q;
var tn = le;
function rn() {
  this.size = 0, this.__data__ = {
    hash: new Se(),
    map: new (tn || en)(),
    string: new Se()
  };
}
var an = rn;
function nn(t) {
  var e = typeof t;
  return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? t !== "__proto__" : t === null;
}
var sn = nn;
var on = sn;
function cn(t, e) {
  var r = t.__data__;
  return on(e) ? r[typeof e == "string" ? "string" : "hash"] : r.map;
}
var W = cn;
var ln = W;
function un(t) {
  var e = ln(this, t).delete(t);
  return this.size -= e ? 1 : 0, e;
}
var fn = un;
var dn = W;
function hn(t) {
  return dn(this, t).get(t);
}
var gn = hn;
var pn = W;
function yn(t) {
  return pn(this, t).has(t);
}
var bn = yn;
var vn = W;
function $n(t, e) {
  var r = vn(this, t), a = r.size;
  return r.set(t, e), this.size += r.size == a ? 0 : 1, this;
}
var _n = $n;
var mn = an;
var An = fn;
var wn = gn;
var Tn = bn;
var On = _n;
function P(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.clear(); ++e < r; ) {
    var a = t[e];
    this.set(a[0], a[1]);
  }
}
P.prototype.clear = mn;
P.prototype.delete = An;
P.prototype.get = wn;
P.prototype.has = Tn;
P.prototype.set = On;
var ue = P;
var gt = ue;
var Cn = "Expected a function";
function fe(t, e) {
  if (typeof t != "function" || e != null && typeof e != "function")
    throw new TypeError(Cn);
  var r = function() {
    var a = arguments, n = e ? e.apply(this, a) : a[0], s = r.cache;
    if (s.has(n))
      return s.get(n);
    var i = t.apply(this, a);
    return r.cache = s.set(n, i) || s, i;
  };
  return r.cache = new (fe.Cache || gt)(), r;
}
fe.Cache = gt;
var Sn = fe;
var jn = Sn;
var En = 500;
function In(t) {
  var e = jn(t, function(a) {
    return r.size === En && r.clear(), a;
  }), r = e.cache;
  return e;
}
var Pn = In;
var xn = Pn;
var Nn = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
var Mn = /\\(\\)?/g;
var Rn = xn(function(t) {
  var e = [];
  return t.charCodeAt(0) === 46 && e.push(""), t.replace(Nn, function(r, a, n, s) {
    e.push(n ? s.replace(Mn, "$1") : a || r);
  }), e;
});
var Ln = Rn;
function Dn(t, e) {
  for (var r = -1, a = t == null ? 0 : t.length, n = Array(a); ++r < a; )
    n[r] = e(t[r], r, t);
  return n;
}
var Fn = Dn;
var je = R;
var Bn = Fn;
var Un = O;
var Gn = oe;
var Kn = 1 / 0;
var Ee = je ? je.prototype : void 0;
var Ie = Ee ? Ee.toString : void 0;
function pt(t) {
  if (typeof t == "string")
    return t;
  if (Un(t))
    return Bn(t, pt) + "";
  if (Gn(t))
    return Ie ? Ie.call(t) : "";
  var e = t + "";
  return e == "0" && 1 / t == -Kn ? "-0" : e;
}
var Hn = pt;
var qn = Hn;
function zn(t) {
  return t == null ? "" : qn(t);
}
var Vn = zn;
var Jn = O;
var Qn = $r;
var Wn = Ln;
var Xn = Vn;
function Yn(t, e) {
  return Jn(t) ? t : Qn(t, e) ? [t] : Wn(Xn(t));
}
var Zn = Yn;
var kn = oe;
var es = 1 / 0;
function ts(t) {
  if (typeof t == "string" || kn(t))
    return t;
  var e = t + "";
  return e == "0" && 1 / t == -es ? "-0" : e;
}
var rs = ts;
var as = Zn;
var ns = rs;
function ss(t, e) {
  e = as(e, t);
  for (var r = 0, a = e.length; t != null && r < a; )
    t = t[ns(e[r++])];
  return r && r == a ? t : void 0;
}
var is = ss;
var os = is;
function cs(t, e, r) {
  var a = t == null ? void 0 : os(t, e);
  return a === void 0 ? r : a;
}
var ls = cs;
var y = lt(ls);
var us = Q;
function fs() {
  this.__data__ = new us(), this.size = 0;
}
var ds = fs;
function hs(t) {
  var e = this.__data__, r = e.delete(t);
  return this.size = e.size, r;
}
var gs = hs;
function ps(t) {
  return this.__data__.get(t);
}
var ys = ps;
function bs(t) {
  return this.__data__.has(t);
}
var vs = bs;
var $s = Q;
var _s = le;
var ms = ue;
var As = 200;
function ws(t, e) {
  var r = this.__data__;
  if (r instanceof $s) {
    var a = r.__data__;
    if (!_s || a.length < As - 1)
      return a.push([t, e]), this.size = ++r.size, this;
    r = this.__data__ = new ms(a);
  }
  return r.set(t, e), this.size = r.size, this;
}
var Ts = ws;
var Os = Q;
var Cs = ds;
var Ss = gs;
var js = ys;
var Es = vs;
var Is = Ts;
function x(t) {
  var e = this.__data__ = new Os(t);
  this.size = e.size;
}
x.prototype.clear = Cs;
x.prototype.delete = Ss;
x.prototype.get = js;
x.prototype.has = Es;
x.prototype.set = Is;
var de = x;
function Ps(t, e) {
  for (var r = -1, a = t == null ? 0 : t.length; ++r < a && e(t[r], r, t) !== false; )
    ;
  return t;
}
var xs = Ps;
var Ns = S;
var Ms = function() {
  try {
    var t = Ns(Object, "defineProperty");
    return t({}, "", {}), t;
  } catch {
  }
}();
var Rs = Ms;
var Pe = Rs;
function Ls(t, e, r) {
  e == "__proto__" && Pe ? Pe(t, e, {
    configurable: true,
    enumerable: true,
    value: r,
    writable: true
  }) : t[e] = r;
}
var yt = Ls;
var Ds = yt;
var Fs = ce;
var Bs = Object.prototype;
var Us = Bs.hasOwnProperty;
function Gs(t, e, r) {
  var a = t[e];
  (!(Us.call(t, e) && Fs(a, r)) || r === void 0 && !(e in t)) && Ds(t, e, r);
}
var bt = Gs;
var Ks = bt;
var Hs = yt;
function qs(t, e, r, a) {
  var n = !r;
  r || (r = {});
  for (var s = -1, i = e.length; ++s < i; ) {
    var o = e[s], c = a ? a(r[o], t[o], o, r, t) : void 0;
    c === void 0 && (c = t[o]), n ? Hs(r, o, c) : Ks(r, o, c);
  }
  return r;
}
var X = qs;
function zs(t, e) {
  for (var r = -1, a = Array(t); ++r < t; )
    a[r] = e(r);
  return a;
}
var Vs = zs;
var Js = L;
var Qs = C;
var Ws = "[object Arguments]";
function Xs(t) {
  return Qs(t) && Js(t) == Ws;
}
var Ys = Xs;
var xe = Ys;
var Zs = C;
var vt = Object.prototype;
var ks = vt.hasOwnProperty;
var ei = vt.propertyIsEnumerable;
var ti = xe(/* @__PURE__ */ function() {
  return arguments;
}()) ? xe : function(t) {
  return Zs(t) && ks.call(t, "callee") && !ei.call(t, "callee");
};
var ri = ti;
var K = { exports: {} };
function ai() {
  return false;
}
var ni = ai;
K.exports;
(function(t, e) {
  var r = A, a = ni, n = e && !e.nodeType && e, s = n && true && t && !t.nodeType && t, i = s && s.exports === n, o = i ? r.Buffer : void 0, c = o ? o.isBuffer : void 0, l = c || a;
  t.exports = l;
})(K, K.exports);
var he = K.exports;
var si = 9007199254740991;
var ii = /^(?:0|[1-9]\d*)$/;
function oi(t, e) {
  var r = typeof t;
  return e = e ?? si, !!e && (r == "number" || r != "symbol" && ii.test(t)) && t > -1 && t % 1 == 0 && t < e;
}
var ci = oi;
var li = 9007199254740991;
function ui(t) {
  return typeof t == "number" && t > -1 && t % 1 == 0 && t <= li;
}
var $t = ui;
var fi = L;
var di = $t;
var hi = C;
var gi = "[object Arguments]";
var pi = "[object Array]";
var yi = "[object Boolean]";
var bi = "[object Date]";
var vi = "[object Error]";
var $i = "[object Function]";
var _i = "[object Map]";
var mi = "[object Number]";
var Ai = "[object Object]";
var wi = "[object RegExp]";
var Ti = "[object Set]";
var Oi = "[object String]";
var Ci = "[object WeakMap]";
var Si = "[object ArrayBuffer]";
var ji = "[object DataView]";
var Ei = "[object Float32Array]";
var Ii = "[object Float64Array]";
var Pi = "[object Int8Array]";
var xi = "[object Int16Array]";
var Ni = "[object Int32Array]";
var Mi = "[object Uint8Array]";
var Ri = "[object Uint8ClampedArray]";
var Li = "[object Uint16Array]";
var Di = "[object Uint32Array]";
var g = {};
g[Ei] = g[Ii] = g[Pi] = g[xi] = g[Ni] = g[Mi] = g[Ri] = g[Li] = g[Di] = true;
g[gi] = g[pi] = g[Si] = g[yi] = g[ji] = g[bi] = g[vi] = g[$i] = g[_i] = g[mi] = g[Ai] = g[wi] = g[Ti] = g[Oi] = g[Ci] = false;
function Fi(t) {
  return hi(t) && di(t.length) && !!g[fi(t)];
}
var Bi = Fi;
function Ui(t) {
  return function(e) {
    return t(e);
  };
}
var ge = Ui;
var H = { exports: {} };
H.exports;
(function(t, e) {
  var r = ut, a = e && !e.nodeType && e, n = a && true && t && !t.nodeType && t, s = n && n.exports === a, i = s && r.process, o = function() {
    try {
      var c = n && n.require && n.require("util").types;
      return c || i && i.binding && i.binding("util");
    } catch {
    }
  }();
  t.exports = o;
})(H, H.exports);
var pe = H.exports;
var Gi = Bi;
var Ki = ge;
var Ne = pe;
var Me = Ne && Ne.isTypedArray;
var Hi = Me ? Ki(Me) : Gi;
var _t = Hi;
var qi = Vs;
var zi = ri;
var Vi = O;
var Ji = he;
var Qi = ci;
var Wi = _t;
var Xi = Object.prototype;
var Yi = Xi.hasOwnProperty;
function Zi(t, e) {
  var r = Vi(t), a = !r && zi(t), n = !r && !a && Ji(t), s = !r && !a && !n && Wi(t), i = r || a || n || s, o = i ? qi(t.length, String) : [], c = o.length;
  for (var l in t)
    (e || Yi.call(t, l)) && !(i && // Safari 9 has enumerable `arguments.length` in strict mode.
    (l == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    n && (l == "offset" || l == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    s && (l == "buffer" || l == "byteLength" || l == "byteOffset") || // Skip index properties.
    Qi(l, c))) && o.push(l);
  return o;
}
var mt = Zi;
var ki = Object.prototype;
function eo(t) {
  var e = t && t.constructor, r = typeof e == "function" && e.prototype || ki;
  return t === r;
}
var ye = eo;
function to(t, e) {
  return function(r) {
    return t(e(r));
  };
}
var At = to;
var ro = At;
var ao = ro(Object.keys, Object);
var no = ao;
var so = ye;
var io = no;
var oo = Object.prototype;
var co = oo.hasOwnProperty;
function lo(t) {
  if (!so(t))
    return io(t);
  var e = [];
  for (var r in Object(t))
    co.call(t, r) && r != "constructor" && e.push(r);
  return e;
}
var uo = lo;
var fo = dt;
var ho = $t;
function go(t) {
  return t != null && ho(t.length) && !fo(t);
}
var wt = go;
var po = mt;
var yo = uo;
var bo = wt;
function vo(t) {
  return bo(t) ? po(t) : yo(t);
}
var Y = vo;
var $o = X;
var _o = Y;
function mo(t, e) {
  return t && $o(e, _o(e), t);
}
var Ao = mo;
function wo(t) {
  var e = [];
  if (t != null)
    for (var r in Object(t))
      e.push(r);
  return e;
}
var To = wo;
var Oo = j;
var Co = ye;
var So = To;
var jo = Object.prototype;
var Eo = jo.hasOwnProperty;
function Io(t) {
  if (!Oo(t))
    return So(t);
  var e = Co(t), r = [];
  for (var a in t)
    a == "constructor" && (e || !Eo.call(t, a)) || r.push(a);
  return r;
}
var Po = Io;
var xo = mt;
var No = Po;
var Mo = wt;
function Ro(t) {
  return Mo(t) ? xo(t, true) : No(t);
}
var be = Ro;
var Lo = X;
var Do = be;
function Fo(t, e) {
  return t && Lo(e, Do(e), t);
}
var Bo = Fo;
var q = { exports: {} };
q.exports;
(function(t, e) {
  var r = A, a = e && !e.nodeType && e, n = a && true && t && !t.nodeType && t, s = n && n.exports === a, i = s ? r.Buffer : void 0, o = i ? i.allocUnsafe : void 0;
  function c(l, u) {
    if (u)
      return l.slice();
    var f = l.length, d = o ? o(f) : new l.constructor(f);
    return l.copy(d), d;
  }
  t.exports = c;
})(q, q.exports);
var Uo = q.exports;
function Go(t, e) {
  var r = -1, a = t.length;
  for (e || (e = Array(a)); ++r < a; )
    e[r] = t[r];
  return e;
}
var Ko = Go;
function Ho(t, e) {
  for (var r = -1, a = t == null ? 0 : t.length, n = 0, s = []; ++r < a; ) {
    var i = t[r];
    e(i, r, t) && (s[n++] = i);
  }
  return s;
}
var qo = Ho;
function zo() {
  return [];
}
var Tt = zo;
var Vo = qo;
var Jo = Tt;
var Qo = Object.prototype;
var Wo = Qo.propertyIsEnumerable;
var Re = Object.getOwnPropertySymbols;
var Xo = Re ? function(t) {
  return t == null ? [] : (t = Object(t), Vo(Re(t), function(e) {
    return Wo.call(t, e);
  }));
} : Jo;
var ve = Xo;
var Yo = X;
var Zo = ve;
function ko(t, e) {
  return Yo(t, Zo(t), e);
}
var ec = ko;
function tc(t, e) {
  for (var r = -1, a = e.length, n = t.length; ++r < a; )
    t[n + r] = e[r];
  return t;
}
var Ot = tc;
var rc = At;
var ac = rc(Object.getPrototypeOf, Object);
var Ct = ac;
var nc = Ot;
var sc = Ct;
var ic = ve;
var oc = Tt;
var cc = Object.getOwnPropertySymbols;
var lc = cc ? function(t) {
  for (var e = []; t; )
    nc(e, ic(t)), t = sc(t);
  return e;
} : oc;
var St = lc;
var uc = X;
var fc = St;
function dc(t, e) {
  return uc(t, fc(t), e);
}
var hc = dc;
var gc = Ot;
var pc = O;
function yc(t, e, r) {
  var a = e(t);
  return pc(t) ? a : gc(a, r(t));
}
var jt = yc;
var bc = jt;
var vc = ve;
var $c = Y;
function _c(t) {
  return bc(t, $c, vc);
}
var Et = _c;
var mc = jt;
var Ac = St;
var wc = be;
function Tc(t) {
  return mc(t, wc, Ac);
}
var Oc = Tc;
var Cc = S;
var Sc = A;
var jc = Cc(Sc, "DataView");
var Ec = jc;
var Ic = S;
var Pc = A;
var xc = Ic(Pc, "Promise");
var Nc = xc;
var Mc = S;
var Rc = A;
var Lc = Mc(Rc, "Set");
var Dc = Lc;
var Fc = S;
var Bc = A;
var Uc = Fc(Bc, "WeakMap");
var Gc = Uc;
var re = Ec;
var ae = le;
var ne = Nc;
var se = Dc;
var ie = Gc;
var It = L;
var N = ht;
var Le = "[object Map]";
var Kc = "[object Object]";
var De = "[object Promise]";
var Fe = "[object Set]";
var Be = "[object WeakMap]";
var Ue = "[object DataView]";
var Hc = N(re);
var qc = N(ae);
var zc = N(ne);
var Vc = N(se);
var Jc = N(ie);
var T = It;
(re && T(new re(new ArrayBuffer(1))) != Ue || ae && T(new ae()) != Le || ne && T(ne.resolve()) != De || se && T(new se()) != Fe || ie && T(new ie()) != Be) && (T = function(t) {
  var e = It(t), r = e == Kc ? t.constructor : void 0, a = r ? N(r) : "";
  if (a)
    switch (a) {
      case Hc:
        return Ue;
      case qc:
        return Le;
      case zc:
        return De;
      case Vc:
        return Fe;
      case Jc:
        return Be;
    }
  return e;
});
var Z = T;
var Qc = Object.prototype;
var Wc = Qc.hasOwnProperty;
function Xc(t) {
  var e = t.length, r = new t.constructor(e);
  return e && typeof t[0] == "string" && Wc.call(t, "index") && (r.index = t.index, r.input = t.input), r;
}
var Yc = Xc;
var Zc = A;
var kc = Zc.Uint8Array;
var Pt = kc;
var Ge = Pt;
function el(t) {
  var e = new t.constructor(t.byteLength);
  return new Ge(e).set(new Ge(t)), e;
}
var $e = el;
var tl = $e;
function rl(t, e) {
  var r = e ? tl(t.buffer) : t.buffer;
  return new t.constructor(r, t.byteOffset, t.byteLength);
}
var al = rl;
var nl = /\w*$/;
function sl(t) {
  var e = new t.constructor(t.source, nl.exec(t));
  return e.lastIndex = t.lastIndex, e;
}
var il = sl;
var Ke = R;
var He = Ke ? Ke.prototype : void 0;
var qe = He ? He.valueOf : void 0;
function ol(t) {
  return qe ? Object(qe.call(t)) : {};
}
var cl = ol;
var ll = $e;
function ul(t, e) {
  var r = e ? ll(t.buffer) : t.buffer;
  return new t.constructor(r, t.byteOffset, t.length);
}
var fl = ul;
var dl = $e;
var hl = al;
var gl = il;
var pl = cl;
var yl = fl;
var bl = "[object Boolean]";
var vl = "[object Date]";
var $l = "[object Map]";
var _l = "[object Number]";
var ml = "[object RegExp]";
var Al = "[object Set]";
var wl = "[object String]";
var Tl = "[object Symbol]";
var Ol = "[object ArrayBuffer]";
var Cl = "[object DataView]";
var Sl = "[object Float32Array]";
var jl = "[object Float64Array]";
var El = "[object Int8Array]";
var Il = "[object Int16Array]";
var Pl = "[object Int32Array]";
var xl = "[object Uint8Array]";
var Nl = "[object Uint8ClampedArray]";
var Ml = "[object Uint16Array]";
var Rl = "[object Uint32Array]";
function Ll(t, e, r) {
  var a = t.constructor;
  switch (e) {
    case Ol:
      return dl(t);
    case bl:
    case vl:
      return new a(+t);
    case Cl:
      return hl(t, r);
    case Sl:
    case jl:
    case El:
    case Il:
    case Pl:
    case xl:
    case Nl:
    case Ml:
    case Rl:
      return yl(t, r);
    case $l:
      return new a();
    case _l:
    case wl:
      return new a(t);
    case ml:
      return gl(t);
    case Al:
      return new a();
    case Tl:
      return pl(t);
  }
}
var Dl = Ll;
var Fl = j;
var ze = Object.create;
var Bl = /* @__PURE__ */ function() {
  function t() {
  }
  return function(e) {
    if (!Fl(e))
      return {};
    if (ze)
      return ze(e);
    t.prototype = e;
    var r = new t();
    return t.prototype = void 0, r;
  };
}();
var Ul = Bl;
var Gl = Ul;
var Kl = Ct;
var Hl = ye;
function ql(t) {
  return typeof t.constructor == "function" && !Hl(t) ? Gl(Kl(t)) : {};
}
var zl = ql;
var Vl = Z;
var Jl = C;
var Ql = "[object Map]";
function Wl(t) {
  return Jl(t) && Vl(t) == Ql;
}
var Xl = Wl;
var Yl = Xl;
var Zl = ge;
var Ve = pe;
var Je = Ve && Ve.isMap;
var kl = Je ? Zl(Je) : Yl;
var eu = kl;
var tu = Z;
var ru = C;
var au = "[object Set]";
function nu(t) {
  return ru(t) && tu(t) == au;
}
var su = nu;
var iu = su;
var ou = ge;
var Qe = pe;
var We = Qe && Qe.isSet;
var cu = We ? ou(We) : iu;
var lu = cu;
var uu = de;
var fu = xs;
var du = bt;
var hu = Ao;
var gu = Bo;
var pu = Uo;
var yu = Ko;
var bu = ec;
var vu = hc;
var $u = Et;
var _u = Oc;
var mu = Z;
var Au = Yc;
var wu = Dl;
var Tu = zl;
var Ou = O;
var Cu = he;
var Su = eu;
var ju = j;
var Eu = lu;
var Iu = Y;
var Pu = be;
var xu = 1;
var Nu = 2;
var Mu = 4;
var xt = "[object Arguments]";
var Ru = "[object Array]";
var Lu = "[object Boolean]";
var Du = "[object Date]";
var Fu = "[object Error]";
var Nt = "[object Function]";
var Bu = "[object GeneratorFunction]";
var Uu = "[object Map]";
var Gu = "[object Number]";
var Mt = "[object Object]";
var Ku = "[object RegExp]";
var Hu = "[object Set]";
var qu = "[object String]";
var zu = "[object Symbol]";
var Vu = "[object WeakMap]";
var Ju = "[object ArrayBuffer]";
var Qu = "[object DataView]";
var Wu = "[object Float32Array]";
var Xu = "[object Float64Array]";
var Yu = "[object Int8Array]";
var Zu = "[object Int16Array]";
var ku = "[object Int32Array]";
var ef = "[object Uint8Array]";
var tf = "[object Uint8ClampedArray]";
var rf = "[object Uint16Array]";
var af = "[object Uint32Array]";
var h = {};
h[xt] = h[Ru] = h[Ju] = h[Qu] = h[Lu] = h[Du] = h[Wu] = h[Xu] = h[Yu] = h[Zu] = h[ku] = h[Uu] = h[Gu] = h[Mt] = h[Ku] = h[Hu] = h[qu] = h[zu] = h[ef] = h[tf] = h[rf] = h[af] = true;
h[Fu] = h[Nt] = h[Vu] = false;
function G(t, e, r, a, n, s) {
  var i, o = e & xu, c = e & Nu, l = e & Mu;
  if (r && (i = n ? r(t, a, n, s) : r(t)), i !== void 0)
    return i;
  if (!ju(t))
    return t;
  var u = Ou(t);
  if (u) {
    if (i = Au(t), !o)
      return yu(t, i);
  } else {
    var f = mu(t), d = f == Nt || f == Bu;
    if (Cu(t))
      return pu(t, o);
    if (f == Mt || f == xt || d && !n) {
      if (i = c || d ? {} : Tu(t), !o)
        return c ? vu(t, gu(i, t)) : bu(t, hu(i, t));
    } else {
      if (!h[f])
        return n ? t : {};
      i = wu(t, f, o);
    }
  }
  s || (s = new uu());
  var m = s.get(t);
  if (m)
    return m;
  s.set(t, i), Eu(t) ? t.forEach(function(b) {
    i.add(G(b, e, r, b, t, s));
  }) : Su(t) && t.forEach(function(b, v) {
    i.set(v, G(b, e, r, v, t, s));
  });
  var $ = l ? c ? _u : $u : c ? Pu : Iu, _ = u ? void 0 : $(t);
  return fu(_ || t, function(b, v) {
    _ && (v = b, b = t[v]), du(i, v, G(b, e, r, v, t, s));
  }), i;
}
var nf = G;
var sf = "__lodash_hash_undefined__";
function of(t) {
  return this.__data__.set(t, sf), this;
}
var cf = of;
function lf(t) {
  return this.__data__.has(t);
}
var uf = lf;
var ff = ue;
var df = cf;
var hf = uf;
function z(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.__data__ = new ff(); ++e < r; )
    this.add(t[e]);
}
z.prototype.add = z.prototype.push = df;
z.prototype.has = hf;
var gf = z;
function pf(t, e) {
  for (var r = -1, a = t == null ? 0 : t.length; ++r < a; )
    if (e(t[r], r, t))
      return true;
  return false;
}
var yf = pf;
function bf(t, e) {
  return t.has(e);
}
var vf = bf;
var $f = gf;
var _f = yf;
var mf = vf;
var Af = 1;
var wf = 2;
function Tf(t, e, r, a, n, s) {
  var i = r & Af, o = t.length, c = e.length;
  if (o != c && !(i && c > o))
    return false;
  var l = s.get(t), u = s.get(e);
  if (l && u)
    return l == e && u == t;
  var f = -1, d = true, m = r & wf ? new $f() : void 0;
  for (s.set(t, e), s.set(e, t); ++f < o; ) {
    var $ = t[f], _ = e[f];
    if (a)
      var b = i ? a(_, $, f, e, t, s) : a($, _, f, t, e, s);
    if (b !== void 0) {
      if (b)
        continue;
      d = false;
      break;
    }
    if (m) {
      if (!_f(e, function(v, w) {
        if (!mf(m, w) && ($ === v || n($, v, r, a, s)))
          return m.push(w);
      })) {
        d = false;
        break;
      }
    } else if (!($ === _ || n($, _, r, a, s))) {
      d = false;
      break;
    }
  }
  return s.delete(t), s.delete(e), d;
}
var Rt = Tf;
function Of(t) {
  var e = -1, r = Array(t.size);
  return t.forEach(function(a, n) {
    r[++e] = [n, a];
  }), r;
}
var Cf = Of;
function Sf(t) {
  var e = -1, r = Array(t.size);
  return t.forEach(function(a) {
    r[++e] = a;
  }), r;
}
var jf = Sf;
var Xe = R;
var Ye = Pt;
var Ef = ce;
var If = Rt;
var Pf = Cf;
var xf = jf;
var Nf = 1;
var Mf = 2;
var Rf = "[object Boolean]";
var Lf = "[object Date]";
var Df = "[object Error]";
var Ff = "[object Map]";
var Bf = "[object Number]";
var Uf = "[object RegExp]";
var Gf = "[object Set]";
var Kf = "[object String]";
var Hf = "[object Symbol]";
var qf = "[object ArrayBuffer]";
var zf = "[object DataView]";
var Ze = Xe ? Xe.prototype : void 0;
var ee = Ze ? Ze.valueOf : void 0;
function Vf(t, e, r, a, n, s, i) {
  switch (r) {
    case zf:
      if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset)
        return false;
      t = t.buffer, e = e.buffer;
    case qf:
      return !(t.byteLength != e.byteLength || !s(new Ye(t), new Ye(e)));
    case Rf:
    case Lf:
    case Bf:
      return Ef(+t, +e);
    case Df:
      return t.name == e.name && t.message == e.message;
    case Uf:
    case Kf:
      return t == e + "";
    case Ff:
      var o = Pf;
    case Gf:
      var c = a & Nf;
      if (o || (o = xf), t.size != e.size && !c)
        return false;
      var l = i.get(t);
      if (l)
        return l == e;
      a |= Mf, i.set(t, e);
      var u = If(o(t), o(e), a, n, s, i);
      return i.delete(t), u;
    case Hf:
      if (ee)
        return ee.call(t) == ee.call(e);
  }
  return false;
}
var Jf = Vf;
var ke = Et;
var Qf = 1;
var Wf = Object.prototype;
var Xf = Wf.hasOwnProperty;
function Yf(t, e, r, a, n, s) {
  var i = r & Qf, o = ke(t), c = o.length, l = ke(e), u = l.length;
  if (c != u && !i)
    return false;
  for (var f = c; f--; ) {
    var d = o[f];
    if (!(i ? d in e : Xf.call(e, d)))
      return false;
  }
  var m = s.get(t), $ = s.get(e);
  if (m && $)
    return m == e && $ == t;
  var _ = true;
  s.set(t, e), s.set(e, t);
  for (var b = i; ++f < c; ) {
    d = o[f];
    var v = t[d], w = e[d];
    if (a)
      var me = i ? a(w, v, d, e, t, s) : a(v, w, d, t, e, s);
    if (!(me === void 0 ? v === w || n(v, w, r, a, s) : me)) {
      _ = false;
      break;
    }
    b || (b = d == "constructor");
  }
  if (_ && !b) {
    var D = t.constructor, F = e.constructor;
    D != F && "constructor" in t && "constructor" in e && !(typeof D == "function" && D instanceof D && typeof F == "function" && F instanceof F) && (_ = false);
  }
  return s.delete(t), s.delete(e), _;
}
var Zf = Yf;
var te = de;
var kf = Rt;
var ed = Jf;
var td = Zf;
var et = Z;
var tt = O;
var rt = he;
var rd = _t;
var ad = 1;
var at = "[object Arguments]";
var nt = "[object Array]";
var U = "[object Object]";
var nd = Object.prototype;
var st = nd.hasOwnProperty;
function sd(t, e, r, a, n, s) {
  var i = tt(t), o = tt(e), c = i ? nt : et(t), l = o ? nt : et(e);
  c = c == at ? U : c, l = l == at ? U : l;
  var u = c == U, f = l == U, d = c == l;
  if (d && rt(t)) {
    if (!rt(e))
      return false;
    i = true, u = false;
  }
  if (d && !u)
    return s || (s = new te()), i || rd(t) ? kf(t, e, r, a, n, s) : ed(t, e, c, r, a, n, s);
  if (!(r & ad)) {
    var m = u && st.call(t, "__wrapped__"), $ = f && st.call(e, "__wrapped__");
    if (m || $) {
      var _ = m ? t.value() : t, b = $ ? e.value() : e;
      return s || (s = new te()), n(_, b, r, a, s);
    }
  }
  return d ? (s || (s = new te()), td(t, e, r, a, n, s)) : false;
}
var id = sd;
var od = id;
var it = C;
function Lt(t, e, r, a, n) {
  return t === e ? true : t == null || e == null || !it(t) && !it(e) ? t !== t && e !== e : od(t, e, r, a, Lt, n);
}
var cd = Lt;
var ld = de;
var ud = cd;
var fd = 1;
var dd = 2;
function hd(t, e, r, a) {
  var n = r.length, s = n, i = !a;
  if (t == null)
    return !s;
  for (t = Object(t); n--; ) {
    var o = r[n];
    if (i && o[2] ? o[1] !== t[o[0]] : !(o[0] in t))
      return false;
  }
  for (; ++n < s; ) {
    o = r[n];
    var c = o[0], l = t[c], u = o[1];
    if (i && o[2]) {
      if (l === void 0 && !(c in t))
        return false;
    } else {
      var f = new ld();
      if (a)
        var d = a(l, u, c, t, e, f);
      if (!(d === void 0 ? ud(u, l, fd | dd, a, f) : d))
        return false;
    }
  }
  return true;
}
var gd = hd;
var pd = j;
function yd(t) {
  return t === t && !pd(t);
}
var bd = yd;
var vd = bd;
var $d = Y;
function _d(t) {
  for (var e = $d(t), r = e.length; r--; ) {
    var a = e[r], n = t[a];
    e[r] = [a, n, vd(n)];
  }
  return e;
}
var md = _d;
function Ad(t, e) {
  return function(r) {
    return r == null ? false : r[t] === e && (e !== void 0 || t in Object(r));
  };
}
var wd = Ad;
var Td = gd;
var Od = md;
var Cd = wd;
function Sd(t) {
  var e = Od(t);
  return e.length == 1 && e[0][2] ? Cd(e[0][0], e[0][1]) : function(r) {
    return r === t || Td(r, t, e);
  };
}
var jd = Sd;
var Ed = nf;
var Id = jd;
var Pd = 1;
function xd(t) {
  return Id(Ed(t, Pd));
}
var Nd = xd;
var Md = lt(Nd);
var ot = class {
  constructor({
    items: e = [],
    identifierName: r = "id",
    getNewId: a
  } = {}) {
    p(this, "sequence", 0);
    p(this, "items", []);
    p(this, "database", null);
    p(this, "name", null);
    p(this, "identifierName", "id");
    p(this, "getNewId");
    if (!Array.isArray(e))
      throw new Error(
        "Can't initialize a Collection with anything else than an array of items"
      );
    this.identifierName = r, this.getNewId = a || this.getNewIdFromSequence, e.map(this.addOne.bind(this));
  }
  /**
   * A Collection may need to access other collections (e.g. for embedding references)
   * This is done through a reference to the parent database.
   */
  setDatabase(e) {
    this.database = e;
  }
  setName(e) {
    this.name = e;
  }
  /**
   * Get a one to many embedder function for a given resource name
   *
   * @example embed posts for an author
   *
   *     authorsCollection._oneToManyEmbedder('posts')
   *
   * @returns Function item => item
   */
  _oneToManyEmbedder(e) {
    if (this.name == null)
      throw new Error("Can't embed references without a collection name");
    const a = `${this.name.slice(0, -1)}_id`;
    return (n) => {
      if (this.database == null)
        throw new Error("Can't embed references without a database");
      const s = this.database.collections[e];
      if (!s)
        throw new Error(
          `Can't embed a non-existing collection ${e}`
        );
      return Array.isArray(n[e]) ? n[e] = s.getAll({
        filter: (i) => n[e].indexOf(
          i[s.identifierName]
        ) !== -1
      }) : n[e] = s.getAll({
        filter: (i) => i[a] === n[this.identifierName]
      }), n;
    };
  }
  /**
   * Get a many to one embedder function for a given resource name
   *
   * @example embed author for a post
   *
   *     postsCollection._manyToOneEmbedder('author')
   *
   * @returns Function item => item
   */
  _manyToOneEmbedder(e) {
    const r = `${e}s`, a = `${e}_id`;
    return (n) => {
      if (this.database == null)
        throw new Error("Can't embed references without a database");
      const s = this.database.collections[r];
      if (!s)
        throw new Error(
          `Can't embed a non-existing collection ${e}`
        );
      try {
        n[e] = s.getOne(
          n[a]
        );
      } catch {
      }
      return n;
    };
  }
  /**
   * @param String[] An array of resource names, e.g. ['books', 'country']
   * @returns Function item => item
   */
  _itemEmbedder(e) {
    const a = (Array.isArray(e) ? e : [e]).map(
      (n) => n.endsWith("s") ? this._oneToManyEmbedder(n) : this._manyToOneEmbedder(n)
    );
    return (n) => a.reduce(
      (s, i) => i(s),
      n
    );
  }
  getCount(e) {
    return this.getAll(e).length;
  }
  getAll(e) {
    let r = this.items.slice(0);
    return e && (e.filter && (r = Dt(r, e.filter)), e.sort && (r = Fd(r, e.sort)), e.range && (r = Bd(r, e.range)), r = r.map((a) => Object.assign({}, a)), e.embed && this.database && (r = r.map(this._itemEmbedder(e.embed)))), r;
  }
  getIndex(e) {
    return this.items.findIndex(
      // biome-ignore lint/suspicious/noDoubleEquals: we want implicit type coercion
      (r) => r[this.identifierName] == e
    );
  }
  getOne(e, r) {
    const a = this.getIndex(e);
    if (a === -1)
      throw new Error(`No item with identifier ${e}`);
    let n = this.items[a];
    return n = Object.assign({}, n), r != null && r.embed && this.database && (n = this._itemEmbedder(r.embed)(n)), n;
  }
  getNewIdFromSequence() {
    return this.sequence++;
  }
  addOne(e) {
    const r = e[this.identifierName];
    if (r != null) {
      if (this.getIndex(r) !== -1)
        throw new Error(
          `An item with the identifier ${r} already exists`
        );
      typeof r == "number" && (this.sequence = Math.max(this.sequence, r) + 1);
    } else
      e[this.identifierName] = this.getNewId();
    return this.items.push(e), Object.assign({}, e);
  }
  updateOne(e, r) {
    const a = this.getIndex(e);
    if (a === -1)
      throw new Error(`No item with identifier ${e}`);
    for (const n in r)
      this.items[a][n] = r[n];
    return Object.assign({}, this.items[a]);
  }
  removeOne(e) {
    const r = this.getIndex(e);
    if (r === -1)
      throw new Error(`No item with identifier ${e}`);
    const a = this.items[r];
    return this.items.splice(r, 1), typeof e == "number" && e == this.sequence - 1 && this.sequence--, a;
  }
};
var Rd = (t, e) => t.reduce((r, a) => r && e(a), true);
var Ld = (t, e) => t.reduce((r, a) => r || e(a), false);
var Dd = (t, e) => t.reduce(
  (r, a, n) => {
    if (r != null)
      return r;
    const s = t.slice(0, n + 1).join("."), i = t.slice(n + 1).join("."), o = y(e, s);
    return Array.isArray(o) && n < t.length - 1 ? [s, i] : void 0;
  },
  void 0
);
var ct = (t, e) => {
  if (t.indexOf("_q") !== -1) {
    const r = t.replace(/(_q)$/, ""), a = new RegExp(e.toString(), "i");
    return (n) => {
      var s;
      return ((s = y(n, r)) == null ? void 0 : s.toString().match(a)) !== null;
    };
  }
  if (t.indexOf("_lte") !== -1) {
    const r = t.replace(/(_lte)$/, "");
    return (a) => y(a, r) <= e;
  }
  if (t.indexOf("_gte") !== -1) {
    const r = t.replace(/(_gte)$/, "");
    return (a) => y(a, r) >= e;
  }
  if (t.indexOf("_lt") !== -1) {
    const r = t.replace(/(_lt)$/, "");
    return (a) => y(a, r) < e;
  }
  if (t.indexOf("_gt") !== -1) {
    const r = t.replace(/(_gt)$/, "");
    return (a) => y(a, r) > e;
  }
  if (t.indexOf("_neq_any") !== -1) {
    const r = t.replace(/(_neq_any)$/, ""), a = Array.isArray(e) ? e : [e];
    return (n) => a.every((s) => y(n, r) != s);
  }
  if (t.indexOf("_neq") !== -1) {
    const r = t.replace(/(_neq)$/, "");
    return (a) => y(a, r) != e;
  }
  if (t.indexOf("_eq_any") !== -1) {
    const r = t.replace(/(_eq_any)$/, ""), a = Array.isArray(e) ? e : [e];
    return (n) => a.some((s) => y(n, r) == s);
  }
  if (t.indexOf("_eq") !== -1) {
    const r = t.replace(/(_eq)$/, "");
    return (a) => y(a, r) == e;
  }
  if (t.indexOf("_inc_any") !== -1) {
    const r = t.replace(/(_inc_any)$/, ""), a = Array.isArray(e) ? e : [e];
    return (n) => a.some((s) => {
      const i = y(n, r);
      return Array.isArray(i) || typeof i == "string" ? i.includes(s) : false;
    });
  }
  if (t.indexOf("_inc") !== -1) {
    const r = t.replace(/(_inc)$/, ""), a = Array.isArray(e) ? e : [e];
    return (n) => a.every((s) => {
      const i = y(n, r);
      return Array.isArray(i) || typeof i == "string" ? i.includes(s) : false;
    });
  }
  if (t.indexOf("_ninc_any") !== -1) {
    const r = t.replace(/(_ninc_any)$/, ""), a = Array.isArray(e) ? e : [e];
    return (n) => a.every((s) => {
      const i = y(n, r);
      return Array.isArray(i) || typeof i == "string" ? !i.includes(s) : false;
    });
  }
  return Array.isArray(e) ? (r) => Array.isArray(y(r, t)) ? Rd(e, (a) => {
    const n = y(r, t);
    return Array.isArray(n) ? Ld(n, (s) => s == a) : false;
  }) : e.filter((a) => a == y(r, t)).length > 0 : typeof e == "object" ? (r) => Md(e)(y(r, t)) : (r) => {
    const a = y(r, t);
    return Array.isArray(a) && typeof e == "string" ? a.indexOf(e) !== -1 : typeof a == "boolean" && typeof e == "string" ? a === (e === "true") : a == e;
  };
};
function Dt(t, e) {
  if (typeof e == "function")
    return t.filter(e);
  if (e instanceof Object) {
    const r = Object.keys(e).map((a) => {
      if (a === "q" && typeof e.q == "string") {
        const i = Ud(e.q), o = (c) => {
          for (const l in c) {
            const u = c[l];
            if (typeof u == "object" && o(u) || u && typeof u == "string" && u.match && u.match(i) !== null)
              return true;
          }
          return false;
        };
        return o;
      }
      const n = a.split("."), s = e[a];
      return n.length > 1 ? (i) => {
        const o = Dd(
          n,
          i
        );
        if (o) {
          const [c, l] = o, u = y(i, c);
          return Array.isArray(u) ? Dt(u, {
            [l]: s
          }).length > 0 : false;
        }
        return ct(a, s)(i);
      } : ct(a, s);
    });
    return t.filter(
      (a) => r.reduce(
        (n, s) => n && s(a),
        true
      )
    );
  }
  throw new Error("Unsupported filter type");
}
function Fd(t, e) {
  if (typeof e == "function")
    return t.sort(e);
  if (typeof e == "string")
    return t.sort((r, a) => r[e] > a[e] ? 1 : r[e] < a[e] ? -1 : 0);
  if (Array.isArray(e)) {
    const r = e[0], a = e[1].toLowerCase() === "asc" ? 1 : -1;
    return t.sort((n, s) => n[r] > s[r] ? a : n[r] < s[r] ? -1 * a : 0);
  }
  throw new Error("Unsupported sort type");
}
function Bd(t, e) {
  if (Array.isArray(e))
    return t.slice(
      e[0],
      e[1] !== void 0 ? e[1] + 1 : void 0
    );
  throw new Error("Unsupported range type");
}
function Ud(t) {
  const n = t.trim().replace(/[.*+?^${}()|[\]\\]/g, "\\$&").split(" ").map((i) => `(${i})`).join("|");
  return new RegExp(n, "i");
}
var Gd = class {
  constructor(e) {
    p(this, "obj", null);
    p(this, "database", null);
    p(this, "name", null);
    if (!(e instanceof Object))
      throw new Error(
        "Can't initialize a Single with anything except an object"
      );
    this.obj = e;
  }
  /**
   * A Single may need to access other collections (e.g. for embedded
   * references) This is done through a reference to the parent database.
   */
  setDatabase(e) {
    this.database = e;
  }
  setName(e) {
    this.name = e;
  }
  // No need to embed Singles, since they are by their nature top-level
  // No need to worry about remote references, (i.e. mysingleton_id=1) since
  // it is by definition a singleton
  _oneToManyEmbedder(e) {
    return (r) => {
      if (this.database == null)
        throw new Error("Can't embed references without a database");
      const a = this.database.collections[e];
      if (!a)
        throw new Error(
          `Can't embed a non-existing collection ${e}`
        );
      return r[e] = a.getAll({
        filter: (n) => r[e].indexOf(
          n[a.identifierName]
        ) !== -1
      }), r;
    };
  }
  _manyToOneEmbedder(e) {
    const r = `${e}s`, a = `${e}_id`;
    return (n) => {
      if (this.database == null)
        throw new Error("Can't embed references without a database");
      const s = this.database.collections[r];
      if (!s)
        throw new Error(
          `Can't embed a non-existing collection ${e}`
        );
      try {
        n[e] = s.getOne(
          n[a]
        );
      } catch {
      }
      return n;
    };
  }
  _itemEmbedder(e) {
    const a = (Array.isArray(e) ? e : [e]).map(
      (n) => n.endsWith("s") ? this._oneToManyEmbedder(n) : this._manyToOneEmbedder(n)
    );
    return (n) => a.reduce(
      (s, i) => i(s),
      n
    );
  }
  getOnly(e) {
    let r = this.obj;
    return e != null && e.embed && this.database && (r = Object.assign({}, r), r = this._itemEmbedder(e.embed)(r)), r;
  }
  updateOnly(e) {
    if (this.obj == null)
      throw new Error("Can't update a non-existing object");
    for (const r in e)
      this.obj[r] = e[r];
    return this.obj;
  }
};
var Kd = class {
  constructor({
    data: e,
    identifierName: r = "id",
    getNewId: a
  } = {}) {
    p(this, "identifierName", "id");
    p(this, "collections", {});
    p(this, "singles", {});
    p(this, "getNewId");
    this.getNewId = a, this.identifierName = r, e && this.init(e);
  }
  /**
   * Shortcut for adding several collections if identifierName is always the same
   */
  init(e) {
    for (const r in e) {
      const a = e[r];
      Array.isArray(a) ? this.addCollection(
        r,
        new ot({
          items: a,
          identifierName: this.identifierName,
          getNewId: this.getNewId
        })
      ) : this.addSingle(r, new Gd(a));
    }
  }
  addCollection(e, r) {
    this.collections[e] = r, r.setDatabase(this), r.setName(e);
  }
  getCollection(e) {
    return this.collections[e];
  }
  getCollectionNames() {
    return Object.keys(this.collections);
  }
  addSingle(e, r) {
    this.singles[e] = r, r.setDatabase(this), r.setName(e);
  }
  getSingle(e) {
    return this.singles[e];
  }
  getSingleNames() {
    return Object.keys(this.singles);
  }
  /**
   * @param {string} name
   * @param {string} params As decoded from the query string, e.g. { sort: "name", filter: {enabled:true}, slice: [10, 20] }
   */
  getCount(e, r) {
    return this.collections[e].getCount(r);
  }
  /**
   * @param {string} name
   * @param {string} params As decoded from the query string, e.g. { sort: "name", filter: {enabled:true}, slice: [10, 20] }
   */
  getAll(e, r) {
    return this.collections[e].getAll(r);
  }
  getOne(e, r, a) {
    return this.collections[e].getOne(r, a);
  }
  addOne(e, r) {
    return Object.prototype.hasOwnProperty.call(this.collections, e) || this.addCollection(
      e,
      new ot({
        items: [],
        identifierName: this.identifierName,
        getNewId: this.getNewId
      })
    ), this.collections[e].addOne(r);
  }
  updateOne(e, r, a) {
    return this.collections[e].updateOne(r, a);
  }
  removeOne(e, r) {
    return this.collections[e].removeOne(r);
  }
  getOnly(e, r) {
    return this.singles[e].getOnly();
  }
  updateOnly(e, r) {
    return this.singles[e].updateOnly(r);
  }
};

// node_modules/ra-data-fakerest/dist/esm/index.js
var __extends = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2) if (Object.prototype.hasOwnProperty.call(b2, p2)) d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    if (typeof b !== "function" && b !== null)
      throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __assign = function() {
  __assign = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p2 in s) if (Object.prototype.hasOwnProperty.call(s, p2))
        t[p2] = s[p2];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
var __awaiter = function(thisArg, _arguments, P2, generator) {
  function adopt(value) {
    return value instanceof P2 ? value : new P2(function(resolve) {
      resolve(value);
    });
  }
  return new (P2 || (P2 = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator = function(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1) throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y2, t, g2;
  return g2 = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g2[Symbol.iterator] = function() {
    return this;
  }), g2;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");
    while (g2 && (g2 = 0, op[0] && (_ = 0)), _) try {
      if (f = 1, y2 && (t = op[0] & 2 ? y2["return"] : op[0] ? y2["throw"] || ((t = y2["return"]) && t.call(y2), 0) : y2.next) && !(t = t.call(y2, op[1])).done) return t;
      if (y2 = 0, t) op = [op[0] & 2, t.value];
      switch (op[0]) {
        case 0:
        case 1:
          t = op;
          break;
        case 4:
          _.label++;
          return { value: op[1], done: false };
        case 5:
          _.label++;
          y2 = op[1];
          op = [0];
          continue;
        case 7:
          op = _.ops.pop();
          _.trys.pop();
          continue;
        default:
          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
            _ = 0;
            continue;
          }
          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
            _.label = op[1];
            break;
          }
          if (op[0] === 6 && _.label < t[1]) {
            _.label = t[1];
            t = op;
            break;
          }
          if (t && _.label < t[2]) {
            _.label = t[2];
            _.ops.push(op);
            break;
          }
          if (t[2]) _.ops.pop();
          _.trys.pop();
          continue;
      }
      op = body.call(thisArg, _);
    } catch (e) {
      op = [6, e];
      y2 = 0;
    } finally {
      f = t = 0;
    }
    if (op[0] & 5) throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var __rest = function(s, e) {
  var t = {};
  for (var p2 in s) if (Object.prototype.hasOwnProperty.call(s, p2) && e.indexOf(p2) < 0)
    t[p2] = s[p2];
  if (s != null && typeof Object.getOwnPropertySymbols === "function")
    for (var i = 0, p2 = Object.getOwnPropertySymbols(s); i < p2.length; i++) {
      if (e.indexOf(p2[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p2[i]))
        t[p2[i]] = s[p2[i]];
    }
  return t;
};
function log(type, resource, params, response) {
  if (console.group) {
    console.groupCollapsed(type, resource, JSON.stringify(params));
    console.log(response);
    console.groupEnd();
  } else {
    console.log("FakeRest request ", type, resource, params);
    console.log("FakeRest response", response);
  }
}
function delayed(response, delay) {
  return delay ? new Promise(function(resolve) {
    setTimeout(function() {
      return resolve(response);
    }, delay);
  }) : response;
}
var esm_default = function(data, loggingEnabled, delay) {
  if (loggingEnabled === void 0) {
    loggingEnabled = false;
  }
  var database = new Kd({ data });
  if (typeof window !== "undefined") {
    window._database = database;
  }
  function getResponse(type, resource, params) {
    var _a2;
    switch (type) {
      case "getList": {
        var _b = params.pagination, page = _b.page, perPage = _b.perPage;
        var _c2 = params.sort, field = _c2.field, order = _c2.order;
        var query = {
          sort: [field, order],
          range: [(page - 1) * perPage, page * perPage - 1],
          filter: params.filter
        };
        return delayed({
          data: database.getAll(resource, query),
          total: database.getCount(resource, {
            filter: params.filter
          })
        }, delay);
      }
      case "getOne":
        return delayed({
          data: database.getOne(resource, params.id, __assign({}, params))
        }, delay);
      case "getMany":
        return delayed({
          data: params.ids.map(function(id2) {
            return database.getOne(resource, id2);
          }, __assign({}, params))
        }, delay);
      case "getManyReference": {
        var _d2 = params.pagination, page = _d2.page, perPage = _d2.perPage;
        var _e = params.sort, field = _e.field, order = _e.order;
        var query = {
          sort: [field, order],
          range: [(page - 1) * perPage, page * perPage - 1],
          filter: __assign(__assign({}, params.filter), (_a2 = {}, _a2[params.target] = params.id, _a2))
        };
        return delayed({
          data: database.getAll(resource, query),
          total: database.getCount(resource, {
            filter: query.filter
          })
        }, delay);
      }
      case "update":
        return delayed({
          data: database.updateOne(resource, params.id, __assign({}, params.data))
        }, delay);
      case "updateMany":
        params.ids.forEach(function(id2) {
          return database.updateOne(resource, id2, __assign({}, params.data));
        });
        return delayed({ data: params.ids }, delay);
      case "create":
        return delayed({ data: database.addOne(resource, __assign({}, params.data)) }, delay);
      case "delete":
        return delayed({ data: database.removeOne(resource, params.id) }, delay);
      case "deleteMany":
        params.ids.forEach(function(id2) {
          return database.removeOne(resource, id2);
        });
        return delayed({ data: params.ids }, delay);
      default:
        return false;
    }
  }
  var handle = function(type, resource, params) {
    return __awaiter(void 0, void 0, void 0, function() {
      var collection, error, response, error_1, signal, paramsWithoutSignal;
      return __generator(this, function(_a2) {
        switch (_a2.label) {
          case 0:
            collection = database.getCollection(resource);
            if (!collection && type !== "create") {
              error = new UndefinedResourceError('Undefined collection "'.concat(resource, '"'));
              error.code = 1;
              throw error;
            }
            _a2.label = 1;
          case 1:
            _a2.trys.push([1, 3, , 4]);
            return [4, getResponse(type, resource, params)];
          case 2:
            response = _a2.sent();
            return [3, 4];
          case 3:
            error_1 = _a2.sent();
            console.error(error_1);
            throw error_1;
          case 4:
            if (loggingEnabled) {
              signal = params.signal, paramsWithoutSignal = __rest(params, ["signal"]);
              log(type, resource, paramsWithoutSignal, response);
            }
            return [2, response];
        }
      });
    });
  };
  return {
    getList: function(resource, params) {
      return handle("getList", resource, params);
    },
    getOne: function(resource, params) {
      return handle("getOne", resource, params);
    },
    getMany: function(resource, params) {
      return handle("getMany", resource, params);
    },
    getManyReference: function(resource, params) {
      return handle("getManyReference", resource, params);
    },
    update: function(resource, params) {
      return handle("update", resource, params);
    },
    updateMany: function(resource, params) {
      return handle("updateMany", resource, params);
    },
    create: function(resource, params) {
      return handle("create", resource, params);
    },
    delete: function(resource, params) {
      return handle("delete", resource, params);
    },
    deleteMany: function(resource, params) {
      return handle("deleteMany", resource, params);
    }
  };
};
var UndefinedResourceError = (
  /** @class */
  function(_super) {
    __extends(UndefinedResourceError2, _super);
    function UndefinedResourceError2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    return UndefinedResourceError2;
  }(Error)
);
export {
  esm_default as default
};
//# sourceMappingURL=ra-data-fakerest.js.map
